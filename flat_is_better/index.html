<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image">
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Flat is better than nested | Ankush</title>
<meta name="generator" content="Jekyll v4.1.1">
<meta property="og:title" content="Flat is better than nested">
<meta property="og:locale" content="en_US">
<meta name="description" content="Leave when not okay">
<meta property="og:description" content="Leave when not okay">
<link rel="canonical" href="www.ankushchoubey.com/flat_is_better/">
<meta property="og:url" content="www.ankushchoubey.com/flat_is_better/">
<meta property="og:site_name" content="Ankush">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-12-20T00:00:00-06:00">
<script type="application/ld+json">
{"url":"www.ankushchoubey.com/flat_is_better/","@type":"BlogPosting","headline":"Flat is better than nested","dateModified":"2019-12-20T14:42:15-06:00","datePublished":"2019-12-20T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"www.ankushchoubey.com/flat_is_better/"},"description":"Leave when not okay","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css">
<link type="application/atom+xml" rel="alternate" href="www.ankushchoubey.com/feed.xml" title="Ankush">
<!-- the google_analytics_id gets auto inserted from the config file -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-35993343-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-35993343-1');
</script>


<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body>
<header class="site-header">

  <div class="wrapper">
<a class="site-title" rel="author" href="/">Ankush</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
<a class="page-link" href="/appreciations/">Appreciations</a><a class="page-link" href="/resources/">Resources</a><a class="page-link" href="/resume/">Resume</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a>
</div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <!-- <script>
  for (const iterator of document.getElementsByClassName('page-link')) {
      if (iterator.innerHTML === 'Search'){ iterator.classList.add('search-button'); iterator.title = 'Search';}
      if (iterator.innerHTML === 'Tags'){ iterator.classList.add('tags-button'); iterator.title = 'Tags';}
      if (iterator.innerHTML === 'Side Projects'){ iterator.classList.add('side-project-button'); iterator.title = 'Side Projects';}
  }
</script> -->


<script type="text/javascript" src="/assets/accordian.js"></script>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Flat is better than nested</h1>

    <p class="page-description">Leave when not okay</p>
<p class="post-meta post-meta-title"><time class="dt-published post-meta-created-date" datetime="2019-12-20T00:00:00-06:00" itemprop="datePublished">
        Written: Dec 20, 2019
      </time>~<time class="dt-modified post-meta-last-modified-date" datetime="2019-12-20T14:42:15-06:00" itemprop="dateModified">
          Updated: Dec 20, 2019
        </time>
       • <span class="read-time" title="Estimated read time">
    
    
      2 min read
    
</span></p>    <style>
        .post-tool-bar{
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0px 10px 0px;
            /* border: 1px solid #e8e8e8; */
            border-width: 0px 0px 1px 0px;
        }
        .left-section , .right-section{
            display: flex;
            gap: 8px;
        }

    </style>
    
    <div class="post-tool-bar">
<!-- <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
        AOS.init();
</script> -->

<div class="tag-list">
    
    <a class="tag fa fa-hashtag clean-code" href="/categories/#clean-code">clean-code</a>
    
</div>
<div class="right-section">
<a id="translate-btn" href="https://www.translatetheweb.com/?ref=TAns&from=&to=hi&a=https%3A%2F%2Fwww.ankushchoubey.com%2F">
    <img src="/images/icons/translate.svg" alt="Translate" style="width:35px">
</a>


<script>
    a = document.getElementById('translate-btn');
    a.setAttribute("href", "https://www.translatetheweb.com/?ref=TAns&from=&to=hi&a=" + window.location.href);
</script><a id="speech-btn">
    <img src="/images/icons/ear.svg" alt="listen" style="width:35px; cursor: pointer;">
</a>

<script>
    speakPost = () => {
        var msg = new SpeechSynthesisUtterance();
        const title = document.querySelector("h1.post-title.p-name").innerText;
        const post = document.querySelector("div.post-content.e-content").innerText
        msg.text = title + '.' + post;
        window.speechSynthesis.speak(msg);
    }
    if ('speechSynthesis' in window) {
        document.getElementById("speech-btn").addEventListener("click", speakPost);
    } else {
        document.getElementById('speech-btn').style.display = 'none';
    }
</script>

<!-- https://www.alebalweb-blog.com/85-text-to-speech-player-with-buttons-play-pause-stop-and-voice-choice.html -->
</div>
      
          
    </div>
    
</header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2">
<a href="#nesting-clutters-your-code">Nesting clutters your code.</a>
<ul>
<li class="toc-entry toc-h3"><a href="#where-does-the-block-end">Where does the block end</a></li>
<li class="toc-entry toc-h3"><a href="#unnecessary-horizontal-scrolling">Unnecessary horizontal scrolling</a></li>
<li class="toc-entry toc-h3"><a href="#nesting-makes-your-code-hard-to-understand">Nesting makes your code hard to understand.</a></li>
</ul>
</li>
<li class="toc-entry toc-h2">
<a href="#avoid-the-use-of-else">Avoid the use of else.</a>
<ul>
<li class="toc-entry toc-h3"><a href="#returnthrow-when-not-okay">Return/throw when not okay</a></li>
<li class="toc-entry toc-h3"><a href="#bubble-vs-gateway">Bubble vs Gateway</a></li>
</ul>
</li>
<li class="toc-entry toc-h2">
<a href="#if-deep-nests-exist-separate-loop-and-operation">If deep nests exist? Separate loop and operation</a>
<ul>
<li class="toc-entry toc-h3"><a href="#simplified-example-link-to-code">Simplified Example: Link to Code</a></li>
</ul>
</li>
</ul>
<p>This might be the most important tip of all the tips covered which applies mainly to if-else statements.</p>

<h2 id="nesting-clutters-your-code">
<a class="anchor" href="#nesting-clutters-your-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nesting clutters your code.</h2>

<h3 id="where-does-the-block-end">
<a class="anchor" href="#where-does-the-block-end" aria-hidden="true"><span class="octicon octicon-link"></span></a>Where does the block end</h3>

<p>It becomes hard to find where a particular block ends easily (especially if someone writes 8 or more nests 😖)</p>

<h3 id="unnecessary-horizontal-scrolling">
<a class="anchor" href="#unnecessary-horizontal-scrolling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unnecessary horizontal scrolling</h3>

<p>Also, you might have to scroll horizontally to see what the complete code is since it does not fit your screen.</p>

<h3 id="nesting-makes-your-code-hard-to-understand">
<a class="anchor" href="#nesting-makes-your-code-hard-to-understand" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nesting makes your code hard to understand.</h3>

<p>While you are reading your nested block, you have to remember what all conditions preceded it.</p>

<p>The below guideline should counter that:</p>

<blockquote>
  <p>Max indent should be 2, in case of exceptions 3</p>
</blockquote>

<h2 id="avoid-the-use-of-else">
<a class="anchor" href="#avoid-the-use-of-else" aria-hidden="true"><span class="octicon octicon-link"></span></a>Avoid the use of else.</h2>

<h3 id="returnthrow-when-not-okay">
<a class="anchor" href="#returnthrow-when-not-okay" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return/throw when not okay</h3>

<ul>
  <li>
    <p>By returning early you make sure that in each of your functions the last line of your function returns what it is actually supposed to return. This will make your code consistent.</p>
  </li>
  <li>
    <p>Also, you would find that you avoid unnecessary nesting (which will calm your eyes 👁 and your linter). Thus, making your code easy to understand.</p>
  </li>
</ul>

<p><img src="/images/2019-12-20-clean-code-1-flat-is-better-than-nested-leave-when-not-okay/1.png" alt=""></p>

<h3 id="bubble-vs-gateway">
<a class="anchor" href="#bubble-vs-gateway" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bubble vs Gateway</h3>

<p>Bad (left): Bubble-Style</p>

<p>Good (right): Gateway-Style</p>

<h2 id="if-deep-nests-exist-separate-loop-and-operation">
<a class="anchor" href="#if-deep-nests-exist-separate-loop-and-operation" aria-hidden="true"><span class="octicon octicon-link"></span></a>If deep nests exist? Separate loop and operation</h2>

<p>Extract the logic to other readable methods or use streams (Java)/lambda or something equivalent in your programming language of choice.</p>

<p>Usually, there is a problem where you have to perform a bunch of operations on an array of objects.</p>

<p>I tend to create at-least** 2 functions** for this:</p>

<ol>
  <li>
    <p>One that performs an operation on a single object.</p>
  </li>
  <li>
    <p>Other calls the first function in a loop.</p>
  </li>
</ol>

<p>In case if something goes wrong, it is easier to debug it since I know what function has what responsibility.</p>

<h3 id="simplified-example-link-to-code">
<a class="anchor" href="#simplified-example-link-to-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simplified Example: <a href="https://gist.github.com/ankschoubey/c9785400ce2c1aee8271485b15dafd6d">Link to Code</a>
</h3>

<p><img src="/images/2019-12-20-clean-code-1-flat-is-better-than-nested-leave-when-not-okay/2.png" alt=""></p>

<p>You have a bunch of students for which you calculate the average grade.</p>

<p><img src="/images/2019-12-20-clean-code-1-flat-is-better-than-nested-leave-when-not-okay/3.png" alt=""></p>

<p>In the above BadGrader, you can see than the code of calculating the grades is within the loop. This is bad as we cannot use the same piece of code elsewhere in the program.</p>

<p><img src="/images/2019-12-20-clean-code-1-flat-is-better-than-nested-leave-when-not-okay/4.png" alt=""></p>

<p>The BetterGrader separates the calculation part from the printing part.</p>

<p><img src="/images/2019-12-20-clean-code-1-flat-is-better-than-nested-leave-when-not-okay/5.png" alt=""></p>

<p>GoodGrader removes the naive logic that was used to calculate average and replaces it with a much shorter code that makes use of inbuilt functions.</p>

<p>This is an example of chunking which will be explained more in the next post.</p>

<p><strong>Next</strong>: <a href="/clean%20code/2019/12/20/clean-code-2-leave-clues-naming-convention.html">Leave clues (Naming convention)</a></p>

<p><strong>Index</strong>: <a href="/software%20development/clean%20code/2019/12/19/series-tips-on-writing-clean-code.html">Tips on writing Clean Code</a></p>

  </div>
<!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js" repo="ankschoubey/blog" issue-term="title" label="blogpost-comment" theme="github-light" crossorigin="anonymous" async>
</script>

  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'www.ankushchoubey.com/flat_is_better/';
      this.page.identifier = 'www.ankushchoubey.com/flat_is_better/';
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://ankushchoubey.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a class="u-url" href="/flat_is_better/" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Random Thoughts</p>
      </div>
    </div>

    <div class="social-links">
<ul class="social-media-list">
<li><a rel="me" href="https://github.com/ankschoubey" target="_blank" title="ankschoubey"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li>
<li><a rel="me" href="https://twitter.com/ankschoubey" target="_blank" title="ankschoubey"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
